<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Hailo AI HAT â€“ PhÃ¡t hiá»‡n cÃ´n trÃ¹ng</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      display: flex;
      flex-direction: column;
      height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      background: #0f0f0f;
      color: #eee;
    }

    /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 18px;
      background: #1a1a2e;
      font-size: 1.1rem;
      font-weight: bold;
      border-bottom: 2px solid #4fc3f7;
      flex-wrap: wrap;
    }
    header span { color: #4fc3f7; }

    /* â”€â”€ Control buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .controls {
      margin-left: auto;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .btn {
      padding: 5px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: bold;
      transition: opacity 0.2s;
    }
    .btn:hover { opacity: 0.85; }
    .btn-on  { background: #4fc3f7; color: #000; }
    .btn-off { background: #444;    color: #eee; }
    .btn-uva-on  { background: #9c27b0; color: #fff; }
    .btn-uva-off { background: #555;    color: #eee; }

    /* â”€â”€ Main video area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    main {
      display: flex;
      flex: 1;
      overflow: hidden;
      padding: 8px;
    }
    #video-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #000;
      border-radius: 10px;
      overflow: hidden;
    }
    #video-panel .panel-title {
      padding: 6px 12px;
      background: #111;
      font-size: 0.85rem;
      color: #aaa;
    }
    #video-panel img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* â”€â”€ Status bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #status-bar {
      padding: 5px 14px;
      background: #111;
      font-size: 0.78rem;
      color: #777;
      border-top: 1px solid #222;
    }
  </style>
</head>
<body>

  <header>
    ğŸ¤– <span>Hailo AI HAT</span>&nbsp;â€” PhÃ¡t hiá»‡n cÃ´n trÃ¹ng thá»i gian thá»±c
    <div class="controls">
      <button class="btn btn-on"      onclick="ledOn()">ğŸ’¡ Báº­t Ä‘Ã¨n</button>
      <button class="btn btn-off"     onclick="ledOff()">ğŸ’¡ Táº¯t Ä‘Ã¨n</button>
      <button class="btn btn-uva-on"  onclick="uvaOn()">ğŸ”µ Báº­t UVA</button>
      <button class="btn btn-uva-off" onclick="uvaOff()">ğŸ”µ Táº¯t UVA</button>
    </div>
  </header>

  <main>
    <div id="video-panel">
      <div class="panel-title">ğŸ“· Camera â€“ detection + tracking overlay</div>
      <img id="video-img" src="/camera_stream" alt="Live camera feed"/>
    </div>
  </main>

  <div id="status-bar">Äang káº¿t ná»‘iâ€¦</div>

  <script>
    const statusBar = document.getElementById('status-bar');
    const videoImg  = document.getElementById('video-img');

    // FPS counter from image load events
    let frameCount = 0;
    videoImg.addEventListener('load', () => { frameCount++; });
    setInterval(() => {
      statusBar.textContent = `FPS: ${frameCount}`;
      frameCount = 0;
    }, 1000);

    // Helper: call a POST endpoint and show result
    async function post(url) {
      try {
        const res  = await fetch(url, { method: 'POST' });
        const data = await res.json();
        statusBar.textContent = data.msg || JSON.stringify(data);
      } catch (e) {
        statusBar.textContent = 'Lá»—i: ' + e;
      }
    }

    function ledOn()  { post('/turn_on_led');  }
    function ledOff() { post('/turn_off_led'); }
    function uvaOn()  { post('/turn_on_uva');  }
    function uvaOff() { post('/turn_off_uva'); }
  </script>

</body>
</html>

